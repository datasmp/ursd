Traceback (most recent call last):
  File "/Users/yusufdanisman/anaconda3/lib/python3.11/site-packages/jupyter_cache/executors/utils.py", line 58, in single_nb_execution
    executenb(
  File "/Users/yusufdanisman/anaconda3/lib/python3.11/site-packages/nbclient/client.py", line 1305, in execute
    return NotebookClient(nb=nb, resources=resources, km=km, **kwargs).execute()
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/yusufdanisman/anaconda3/lib/python3.11/site-packages/jupyter_core/utils/__init__.py", line 173, in wrapped
    return loop.run_until_complete(inner)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/yusufdanisman/anaconda3/lib/python3.11/asyncio/base_events.py", line 654, in run_until_complete
    return future.result()
           ^^^^^^^^^^^^^^^
  File "/Users/yusufdanisman/anaconda3/lib/python3.11/site-packages/nbclient/client.py", line 705, in async_execute
    await self.async_execute_cell(
  File "/Users/yusufdanisman/anaconda3/lib/python3.11/site-packages/nbclient/client.py", line 1058, in async_execute_cell
    await self._check_raise_for_error(cell, cell_index, exec_reply)
  File "/Users/yusufdanisman/anaconda3/lib/python3.11/site-packages/nbclient/client.py", line 914, in _check_raise_for_error
    raise CellExecutionError.from_cell_and_msg(cell, exec_reply_content)
nbclient.exceptions.CellExecutionError: An error occurred while executing the following cell:
------------------
df_train, df_test = get_training_test_data()
df_train.shape, df_test.shape
------------------


[0;31m---------------------------------------------------------------------------[0m
[0;31mYFRateLimitError[0m                          Traceback (most recent call last)
Cell [0;32mIn[3], line 1[0m
[0;32m----> 1[0m df_train, df_test [38;5;241m=[39m get_training_test_data()
[1;32m      2[0m df_train[38;5;241m.[39mshape, df_test[38;5;241m.[39mshape

Cell [0;32mIn[2], line 2[0m, in [0;36mget_training_test_data[0;34m(stock, start, end, training_ratio)[0m
[1;32m      1[0m [38;5;28;01mdef[39;00m [38;5;21mget_training_test_data[39m(stock[38;5;241m=[39m[38;5;124m'[39m[38;5;124mAMZN[39m[38;5;124m'[39m, start[38;5;241m=[39m[38;5;124m'[39m[38;5;124m2019-1-1[39m[38;5;124m'[39m, end[38;5;241m=[39m[38;5;124m'[39m[38;5;124m2021-1-31[39m[38;5;124m'[39m, training_ratio[38;5;241m=[39m[38;5;241m0.96[39m):
[0;32m----> 2[0m     df [38;5;241m=[39m yf[38;5;241m.[39mTicker(stock)[38;5;241m.[39mhistory(start[38;5;241m=[39mstart, end[38;5;241m=[39mend)
[1;32m      3[0m     df [38;5;241m=[39m df[38;5;241m.[39miloc[:,:[38;5;241m-[39m[38;5;241m3[39m]
[1;32m      4[0m     df[38;5;241m.[39mreset_index(inplace[38;5;241m=[39m[38;5;28;01mTrue[39;00m)

File [0;32m~/anaconda3/lib/python3.11/site-packages/yfinance/utils.py:104[0m, in [0;36mlog_indent_decorator.<locals>.wrapper[0;34m(*args, **kwargs)[0m
[1;32m    101[0m logger[38;5;241m.[39mdebug([38;5;124mf[39m[38;5;124m'[39m[38;5;124mEntering [39m[38;5;132;01m{[39;00mfunc[38;5;241m.[39m[38;5;18m__name__[39m[38;5;132;01m}[39;00m[38;5;124m()[39m[38;5;124m'[39m)
[1;32m    103[0m [38;5;28;01mwith[39;00m IndentationContext():
[0;32m--> 104[0m     result [38;5;241m=[39m func([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)
[1;32m    106[0m logger[38;5;241m.[39mdebug([38;5;124mf[39m[38;5;124m'[39m[38;5;124mExiting [39m[38;5;132;01m{[39;00mfunc[38;5;241m.[39m[38;5;18m__name__[39m[38;5;132;01m}[39;00m[38;5;124m()[39m[38;5;124m'[39m)
[1;32m    107[0m [38;5;28;01mreturn[39;00m result

File [0;32m~/anaconda3/lib/python3.11/site-packages/yfinance/base.py:80[0m, in [0;36mTickerBase.history[0;34m(self, *args, **kwargs)[0m
[1;32m     78[0m [38;5;129m@utils[39m[38;5;241m.[39mlog_indent_decorator
[1;32m     79[0m [38;5;28;01mdef[39;00m [38;5;21mhistory[39m([38;5;28mself[39m, [38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs) [38;5;241m-[39m[38;5;241m>[39m pd[38;5;241m.[39mDataFrame:
[0;32m---> 80[0m     [38;5;28;01mreturn[39;00m [38;5;28mself[39m[38;5;241m.[39m_lazy_load_price_history()[38;5;241m.[39mhistory([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)

File [0;32m~/anaconda3/lib/python3.11/site-packages/yfinance/utils.py:104[0m, in [0;36mlog_indent_decorator.<locals>.wrapper[0;34m(*args, **kwargs)[0m
[1;32m    101[0m logger[38;5;241m.[39mdebug([38;5;124mf[39m[38;5;124m'[39m[38;5;124mEntering [39m[38;5;132;01m{[39;00mfunc[38;5;241m.[39m[38;5;18m__name__[39m[38;5;132;01m}[39;00m[38;5;124m()[39m[38;5;124m'[39m)
[1;32m    103[0m [38;5;28;01mwith[39;00m IndentationContext():
[0;32m--> 104[0m     result [38;5;241m=[39m func([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)
[1;32m    106[0m logger[38;5;241m.[39mdebug([38;5;124mf[39m[38;5;124m'[39m[38;5;124mExiting [39m[38;5;132;01m{[39;00mfunc[38;5;241m.[39m[38;5;18m__name__[39m[38;5;132;01m}[39;00m[38;5;124m()[39m[38;5;124m'[39m)
[1;32m    107[0m [38;5;28;01mreturn[39;00m result

File [0;32m~/anaconda3/lib/python3.11/site-packages/yfinance/scrapers/history.py:175[0m, in [0;36mPriceHistory.history[0;34m(self, period, interval, start, end, prepost, actions, auto_adjust, back_adjust, repair, keepna, proxy, rounding, timeout, raise_errors)[0m
[1;32m    173[0m         get_fn [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39m_data[38;5;241m.[39mcache_get
[1;32m    174[0m [38;5;28;01mtry[39;00m:
[0;32m--> 175[0m     data [38;5;241m=[39m get_fn(
[1;32m    176[0m         url[38;5;241m=[39murl,
[1;32m    177[0m         params[38;5;241m=[39mparams,
[1;32m    178[0m         proxy[38;5;241m=[39mproxy,
[1;32m    179[0m         timeout[38;5;241m=[39mtimeout
[1;32m    180[0m     )
[1;32m    181[0m     [38;5;28;01mif[39;00m [38;5;124m"[39m[38;5;124mWill be right back[39m[38;5;124m"[39m [38;5;129;01min[39;00m data[38;5;241m.[39mtext [38;5;129;01mor[39;00m data [38;5;129;01mis[39;00m [38;5;28;01mNone[39;00m:
[1;32m    182[0m         [38;5;28;01mraise[39;00m [38;5;167;01mRuntimeError[39;00m([38;5;124m"[39m[38;5;124m*** YAHOO! FINANCE IS CURRENTLY DOWN! ***[39m[38;5;130;01m\n[39;00m[38;5;124m"[39m
[1;32m    183[0m                            [38;5;124m"[39m[38;5;124mOur engineers are working quickly to resolve [39m[38;5;124m"[39m
[1;32m    184[0m                            [38;5;124m"[39m[38;5;124mthe issue. Thank you for your patience.[39m[38;5;124m"[39m)

File [0;32m~/anaconda3/lib/python3.11/site-packages/yfinance/data.py:32[0m, in [0;36mlru_cache_freezeargs.<locals>.wrapped[0;34m(*args, **kwargs)[0m
[1;32m     30[0m args [38;5;241m=[39m [38;5;28mtuple[39m([[38;5;28mtuple[39m(arg) [38;5;28;01mif[39;00m [38;5;28misinstance[39m(arg, [38;5;28mlist[39m) [38;5;28;01melse[39;00m arg [38;5;28;01mfor[39;00m arg [38;5;129;01min[39;00m args])
[1;32m     31[0m kwargs [38;5;241m=[39m {k: [38;5;28mtuple[39m(v) [38;5;28;01mif[39;00m [38;5;28misinstance[39m(v, [38;5;28mlist[39m) [38;5;28;01melse[39;00m v [38;5;28;01mfor[39;00m k, v [38;5;129;01min[39;00m kwargs[38;5;241m.[39mitems()}
[0;32m---> 32[0m [38;5;28;01mreturn[39;00m func([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)

File [0;32m~/anaconda3/lib/python3.11/site-packages/yfinance/data.py:416[0m, in [0;36mYfData.cache_get[0;34m(self, url, user_agent_headers, params, proxy, timeout)[0m
[1;32m    413[0m [38;5;129m@lru_cache_freezeargs[39m
[1;32m    414[0m [38;5;129m@lru_cache[39m(maxsize[38;5;241m=[39mcache_maxsize)
[1;32m    415[0m [38;5;28;01mdef[39;00m [38;5;21mcache_get[39m([38;5;28mself[39m, url, user_agent_headers[38;5;241m=[39m[38;5;28;01mNone[39;00m, params[38;5;241m=[39m[38;5;28;01mNone[39;00m, proxy[38;5;241m=[39m[38;5;28;01mNone[39;00m, timeout[38;5;241m=[39m[38;5;241m30[39m):
[0;32m--> 416[0m     [38;5;28;01mreturn[39;00m [38;5;28mself[39m[38;5;241m.[39mget(url, user_agent_headers, params, proxy, timeout)

File [0;32m~/anaconda3/lib/python3.11/site-packages/yfinance/utils.py:104[0m, in [0;36mlog_indent_decorator.<locals>.wrapper[0;34m(*args, **kwargs)[0m
[1;32m    101[0m logger[38;5;241m.[39mdebug([38;5;124mf[39m[38;5;124m'[39m[38;5;124mEntering [39m[38;5;132;01m{[39;00mfunc[38;5;241m.[39m[38;5;18m__name__[39m[38;5;132;01m}[39;00m[38;5;124m()[39m[38;5;124m'[39m)
[1;32m    103[0m [38;5;28;01mwith[39;00m IndentationContext():
[0;32m--> 104[0m     result [38;5;241m=[39m func([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)
[1;32m    106[0m logger[38;5;241m.[39mdebug([38;5;124mf[39m[38;5;124m'[39m[38;5;124mExiting [39m[38;5;132;01m{[39;00mfunc[38;5;241m.[39m[38;5;18m__name__[39m[38;5;132;01m}[39;00m[38;5;124m()[39m[38;5;124m'[39m)
[1;32m    107[0m [38;5;28;01mreturn[39;00m result

File [0;32m~/anaconda3/lib/python3.11/site-packages/yfinance/data.py:347[0m, in [0;36mYfData.get[0;34m(self, url, user_agent_headers, params, proxy, timeout)[0m
[1;32m    345[0m [38;5;129m@utils[39m[38;5;241m.[39mlog_indent_decorator
[1;32m    346[0m [38;5;28;01mdef[39;00m [38;5;21mget[39m([38;5;28mself[39m, url, user_agent_headers[38;5;241m=[39m[38;5;28;01mNone[39;00m, params[38;5;241m=[39m[38;5;28;01mNone[39;00m, proxy[38;5;241m=[39m[38;5;28;01mNone[39;00m, timeout[38;5;241m=[39m[38;5;241m30[39m):
[0;32m--> 347[0m     [38;5;28;01mreturn[39;00m [38;5;28mself[39m[38;5;241m.[39m_make_request(url, request_method [38;5;241m=[39m [38;5;28mself[39m[38;5;241m.[39m_session[38;5;241m.[39mget, user_agent_headers[38;5;241m=[39muser_agent_headers, params[38;5;241m=[39mparams, proxy[38;5;241m=[39mproxy, timeout[38;5;241m=[39mtimeout)

File [0;32m~/anaconda3/lib/python3.11/site-packages/yfinance/utils.py:104[0m, in [0;36mlog_indent_decorator.<locals>.wrapper[0;34m(*args, **kwargs)[0m
[1;32m    101[0m logger[38;5;241m.[39mdebug([38;5;124mf[39m[38;5;124m'[39m[38;5;124mEntering [39m[38;5;132;01m{[39;00mfunc[38;5;241m.[39m[38;5;18m__name__[39m[38;5;132;01m}[39;00m[38;5;124m()[39m[38;5;124m'[39m)
[1;32m    103[0m [38;5;28;01mwith[39;00m IndentationContext():
[0;32m--> 104[0m     result [38;5;241m=[39m func([38;5;241m*[39margs, [38;5;241m*[39m[38;5;241m*[39mkwargs)
[1;32m    106[0m logger[38;5;241m.[39mdebug([38;5;124mf[39m[38;5;124m'[39m[38;5;124mExiting [39m[38;5;132;01m{[39;00mfunc[38;5;241m.[39m[38;5;18m__name__[39m[38;5;132;01m}[39;00m[38;5;124m()[39m[38;5;124m'[39m)
[1;32m    107[0m [38;5;28;01mreturn[39;00m result

File [0;32m~/anaconda3/lib/python3.11/site-packages/yfinance/data.py:409[0m, in [0;36mYfData._make_request[0;34m(self, url, request_method, user_agent_headers, body, params, proxy, timeout)[0m
[1;32m    407[0m     [38;5;66;03m# Raise exception if rate limited[39;00m
[1;32m    408[0m     [38;5;28;01mif[39;00m response[38;5;241m.[39mstatus_code [38;5;241m==[39m [38;5;241m429[39m:
[0;32m--> 409[0m         [38;5;28;01mraise[39;00m YFRateLimitError()
[1;32m    411[0m [38;5;28;01mreturn[39;00m response

[0;31mYFRateLimitError[0m: Too Many Requests. Rate limited. Try after a while.

